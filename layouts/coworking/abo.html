{{ define "main" }}
<!-- Page Wrap -->
<div class="page coworking-abo" id="top">

  <nav class="main-nav dark transparent stick-fixed">
    {{ partial "navigation.html" . }}
  </nav>

  <!-- Header -->
  <section class="small-section-header bg-dark-lighter">
    <div class="relative container text-start pt-80">

      <div class="row">

        <div class="col-md-8">
          <h1 class="hs-line-11 font-alt mb-0">Coworking-Abo</h1>
        </div>

        <div class="col-md-4 mt-30">
          <div class="mod-breadcrumbs font-alt align-right">
            <a href="/coworking/"><i class="fa fa-angle-left"></i> Zurück zu Coworking</a>
          </div>
        </div>
      </div>

    </div>
  </section>
  <!-- End Header -->

  <!-- Info Section -->
  <section class="page-section">
    <div class="container relative">

      <h2 class="hs-line-11 font-alt mt-50">Coworking Abo – Preise</h2>

      <p>Du bist jünger als 18? Dann profitierst du von 50 % Jugendrabatt auf unsere Monatsabos.</p>

      <!-- Pricing row -->
      <div class="row">

        <!-- Pricing Item -->
        <div class="col-sm-6 col-md-3">
          <div class="pricing-item">
            <div class="pricing-item-inner">
              <div class="pricing-wrap">

                <!-- Icon (Simple-line-icons) -->
                <div class="pricing-icon">
                  <img src="abianer-1.svg" alt="">
                </div>

                <!-- Pricing Title -->
                <div class="pricing-title">
                  1 Tag<br>pro Woche
                </div>

                <!-- Pricing Features -->
                <div class="pricing-features font-alt">
                  <ul class="sf-list pr-list">
                    <li>1 Barista-Getränk pro Tag</li>
                    <li>Kaffee in Selbstbedienung</li>
                    <li>Membership inklusive</li>
                    <li>Drucker (fair use)</li>
                    <li>Holzkiste (+&nbsp;CHF&nbsp;25)</li>
                    <li>Domiziladresse (+&nbsp;CHF&nbsp;75)</li>
                  </ul>
                </div>

                <div class="pricing-num">
                  <sup>CHF</sup>130<br><small>pro Monat</small>
                </div>

                <a href="/coworking/abo/?option=1#aboform" class="btn btn-mod btn-border btn-medium btn-round d-block mt-20 pricing-btn">Abo lösen</a>
              </div>
            </div>
          </div>
        </div>
        <!-- End Pricing Item -->

        <!-- Pricing Item -->
        <div class="col-sm-6 col-md-3">
          <div class="pricing-item">
            <div class="pricing-item-inner">
              <div class="pricing-wrap">

                <!-- Icon (Simple-line-icons) -->
                <div class="pricing-icon">
                  <img src="abianer-2.svg" alt="">
                </div>

                <!-- Pricing Title -->
                <div class="pricing-title">
                  2 Tage<br>pro Woche
                </div>

                <!-- Pricing Features -->
                <div class="pricing-features font-alt">
                  <ul class="sf-list pr-list">
                    <li>1 Barista-Getränk pro Tag</li>
                    <li>Kaffee in Selbstbedienung</li>
                    <li>Membership inklusive</li>
                    <li>Drucker (fair use)</li>
                    <li>Holzkiste (+&nbsp;CHF&nbsp;25)</li>
                    <li>Domiziladresse (+&nbsp;CHF&nbsp;75)</li>
                  </ul>
                </div>

                <div class="pricing-num">
                  <sup>CHF</sup>260<br><small>pro Monat</small>
                </div>

                <a href="/coworking/abo/?option=2#aboform" class="btn btn-mod btn-border btn-medium btn-round d-block mt-20 pricing-btn">Abo lösen</a>
              </div>
            </div>
          </div>
        </div>
        <!-- End Pricing Item -->

        <!-- Pricing Item -->
        <div class="col-sm-6 col-md-3">
          <div class="pricing-item">
            <div class="pricing-item-inner">
              <div class="pricing-wrap">

                <!-- Icon (Simple-line-icons) -->
                <div class="pricing-icon">
                  <img src="abianer-3.svg" alt="">
                </div>

                <!-- Pricing Title -->
                <div class="pricing-title">
                  3 Tage<br>pro Woche
                </div>

                <!-- Pricing Features -->
                <div class="pricing-features font-alt">
                  <ul class="sf-list pr-list">
                    <li>1 Barista-Getränk pro Tag</li>
                    <li>Kaffee in Selbstbedienung</li>
                    <li>Membership inklusive</li>
                    <li>Drucker (fair use)</li>
                    <li>Holzkiste (+&nbsp;CHF&nbsp;25)</li>
                    <li>Domiziladresse (+&nbsp;CHF&nbsp;75)</li>
                  </ul>
                </div>

                <div class="pricing-num">
                  <sup>CHF</sup>390<br><small>pro Monat</small>
                </div>

                <a href="/coworking/abo/?option=3#aboform" class="btn btn-mod btn-border btn-medium btn-round d-block mt-20 pricing-btn">Abo lösen</a>
              </div>
            </div>
          </div>
        </div>
        <!-- End Pricing Item -->


        <!-- Pricing Item -->
        <div class="col-sm-6 col-md-3">
          <div class="pricing-item">
            <div class="pricing-item-inner">
              <div class="pricing-wrap">

                <!-- Icon (Simple-line-icons) -->
                <div class="pricing-icon">
                  <img src="abianer-5.svg" alt="">
                </div>

                <!-- Pricing Title -->
                <div class="pricing-title">
                  Full Time<br/><br/>
                </div>

                <!-- Pricing Features -->
                <div class="pricing-features font-alt">
                  <ul class="sf-list pr-list">
                    <li>1 Barista-Getränk pro Tag</li>
                    <li>Kaffee in Selbstbedienung</li>
                    <li>Membership inklusive</li>
                    <li>Drucker (fair use)</li>
                    <li>Holzkiste (+&nbsp;CHF&nbsp;25)</li>
                    <li>Domiziladresse (+&nbsp;CHF&nbsp;75)</li>
                  </ul>
                </div>
                <div class="pricing-num">
                  <sup>CHF</sup>520<br><small>pro Monat</small>
                </div>

                <a href="/coworking/abo/?option=5#aboform" class="btn btn-mod btn-border btn-medium btn-round d-block mt-20 pricing-btn">Abo lösen</a>
              </div>
            </div>
          </div>
        </div>
        <!-- End Pricing Item -->

        <!-- Pricing Item -->
        <div class="col-sm-6 offset-sm-3">
          <div class="pricing-item">
            <div class="pricing-item-inner">
              <div class="pricing-wrap">

                <!-- Icon (Simple-line-icons) -->
                <div class="pricing-icon">
                  <img src="abianer-5.svg" alt="">
                </div>

                <!-- Pricing Title -->
                <div class="pricing-title">
                  Team-Abo
                </div>

                <!-- Pricing Features -->
                <div class="pricing-features font-alt">
                  <ul class="sf-list pr-list">
                    <li>Fix & Flex Arbeitsplätze</li>
                    <li>Dedizierter Teamspace</li>
                    <li>Membership inklusive</li>
                    <li>Drucker, Telefonboxen und mehr (fair use)</li>
                    <li>Workshopräume, Meetingraum-Packages</li>
                    <li>Lagerplatz</li>
                    <li>Domiziladresse (+&nbsp;CHF&nbsp;75)</li>
                  </ul>
                </div>
                <div class="pricing-num" style="margin-top: -26px;">
                  <small><strong>Sprich mit uns!</strong></small>
                </div>

                <a href="/coworking/abo/?option=firma#aboform" class="btn btn-mod btn-border btn-medium btn-round d-block mt-20 pricing-btn">Kontakt</a>
              </div>
            </div>
          </div>
        </div>
        <!-- End Pricing Item -->

      </div>
      <!-- End Pricing row -->
    </div>

    <div class="text-center">
      <a href="https://drive.google.com/file/d/1NeblQInNY1gOJFO3AuLm-VPENk3WU_yb/view"
         target="_blank" rel="no-referrer" class="btn btn-mod btn-large">Übersicht als PDF</a>
    </div>
  </section>

  <!-- Order Section -->
  <section class="page-section" id="aboform">
    <div class="container relative">

      <div class="row">

        <!-- Content -->
        <div class="col-sm-10 offset-sm-1">

          <!-- Text -->
          <div class="section-text">
            <h1 class="mt-0 font-alt">Monatsabo lösen</h1>

            <form name="Coworking-Abo" action="" class="form" netlify>
              <input type="hidden" name="form-name" value="Coworking-Abo" />

              <div class="row">
                <div class="col-sm-6 mb-20 mb-md-10">
                  <label for="abo-option" class="form-label">Abo*</label>
                  <select id="abo-option" name="abo-option" class="form-control">
                    <option value="1">1 Tag pro Woche (CHF 130)</option>
                    <option value="2" selected="selected">2 Tage pro Woche (CHF 260)</option>
                    <option value="3">3 Tage pro Woche (CHF 390)</option>
                    <option value="5">Full Time (CHF 520)</option>
                    <option value="firma">Firmenabo (tbd)</option>
                  </select>
                  <br>
                  <small>
                    Mindestlaufzeit 3 Monate. Kündigungs- und Änderungsfrist 1 Monat.<br>
                    Leistungen können nicht auf Folgemonate übertragen werden. Das Abo ist
                    persönlich und nicht übertragbar.
                  </small>
                </div>
                <div class="col-sm-6 mb-20 mb-md-10">
                  <label for="startmonat" class="form-label">Startmonat*</label>
                  <select id="startmonat" name="startmonat" class="form-control">
                    <option selected="selected">Januar</option>
                    <option>Februar</option>
                    <option>März</option>
                    <option>April</option>
                    <option>Mai</option>
                    <option>Juni</option>
                    <option>Juli</option>
                    <option>August</option>
                    <option>September</option>
                    <option>Oktober</option>
                    <option>November</option>
                    <option>Dezember</option>
                  </select>
                  <br><small>Ab welchem Monat soll das Abo gültig sein?</small>
                </div>
              </div>

              <hr>

              <div class="row">
                <div class="col-sm-6 mb-20 mb-md-10">
                  <label for="firma" class="form-label">Firma</label>
                  <input type="text" id="firma" name="firma" class="form-control" placeholder="" maxlength="100">
                </div>
              </div>

              <div class="row">

                <div class="col-sm-6 mb-20 mb-md-10">
                  <label for="vorname" class="form-label">Vorname*</label>
                  <input type="text" id="vorname" name="vorname" class="form-control" placeholder="" maxlength="100" validate="notEmpty">
                </div>

                <div class="col-sm-6 mb-20 mb-md-10">
                  <label for="nachname" class="form-label">Nachname*</label>
                  <input type="text" id="nachname" name="nachname" class="form-control" placeholder="" maxlength="100" validate="notEmpty">
                </div>
              </div>

              <div class="row">
                <div class="col-sm-4 mb-20 mb-md-10">
                  <label for="geburtsdatum" class="form-label">Geburtsdatum*</label>
                  <input type="text" id="geburtsdatum" name="geburtsdatum" class="form-control" placeholder="tt.mm.jjjj" maxlength="10" validate="notEmpty">
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 mb-20 mb-md-10">
                  <label for="strasse" class="form-label">Strasse*</label>
                  <input type="text" id="strasse" name="strasse" class="form-control" placeholder="" maxlength="100" validate="notEmpty">
                </div>

                <div class="col-sm-2 mb-20 mb-md-10">
                  <label for="plz" class="form-label">PLZ*</label>
                  <input type="text" id="plz" name="plz" class="form-control" placeholder="" maxlength="5"  validate="notEmpty">
                </div>

                <div class="col-sm-4 mb-20 mb-md-10">
                  <label for="ort" class="form-label">Ort*</label>
                  <input type="text" id="ort" name="ort" class="form-control" placeholder="" maxlength="50"  validate="notEmpty">
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 mb-20 mb-md-10">
                  <label for="email" class="form-label">E-Mail-Adresse*</label>
                  <input type="email" id="email" name="email" class="form-control" placeholder="" maxlength="100" validate="email">
                </div>


                <div class="col-sm-6 mb-20 mb-md-10">
                  <label for="telefon" class="form-label">Telefon*</label>
                  <input type="text" id="telefon" name="telefon" class="form-control" placeholder="" maxlength="100" validate="notEmpty">
                </div>
              </div>

              <div class="mb-20 mb-md-10">
                <label for="bemerkungen" class="form-label">Bemerkungen</label>
                <textarea id="bemerkungen" name="bemerkungen" class="form-control" rows="3" placeholder="" maxlength="400"></textarea>
              </div>

              <div id="validation-error-message" class="alert error" style="display: none;">
                <button class="alert-close" type="button" data-bs-dismiss="alert" aria-label="Close"><i class="fa fa-lg  fa-times-circle"></i></button>
                Hoppla Schorsch! Bitte die markierten Felder überprüfen.
                <ul class="error-details list-unstyled small"></ul>
              </div>

              <button type="submit" class="btn btn-mod btn-large btn-round">Verbindlich anmelden <i class="fa fa-paper-plane-o" aria-hidden="true"></i></button>
            </form>

            <div class="modal-content" id="form-success-content" style="display:none">
              <div class="modal-header">
                <h3 class="modal-title calendar-dialog-title"><i class="fa fa-heart"></i> Danke!</h3>
              </div>
              <div class="modal-body">
                <h4>Deine Anmeldung für das Coworking-Abo wurde abgeschickt</h4>
                <p>
                  Wir überprüfen nun die Anfrage und werden uns mit weiteren Details bei dir melden.
                </p>
                <p>
                  Wenn du noch Fragen hast, schreibe bitte ein Mail an <a href="mailto:community@effinger.ch">community@effinger.ch</a>
                </p>
              </div>
            </div>

          </div>
          <!-- End Text -->

        </div>
        <!-- End Content -->
      </div>

    </div>
  </section>
  <!-- End Order Section -->
</div>
<!-- End Page Wrap -->
{{ end }}

{{ define "body_includes" }}
<script>
  // *******************************
  // Handle the form.
  // *******************************
  $(document).ready(function() {
    const $form = $('form');

    // On loading: Select number of days according to query parameter ?tage=
    // First test if we have a valid option.
    const aboOption = getUrlVars()["option"];
    if ($('[name="abo-option"] option[value=' + aboOption + ']').length > 0) {
      $('[name="abo-option"]').val(aboOption);
    }

    // Read a page's GET URL variables and return them as an associative array.
    function getUrlVars() {
      const vars = [];
      let hash;
      const hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
      for(let i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
      }
      return vars;
    }

    function reset() {
      $form.find('.invalid').removeClass('invalid');
      $form.find('#validation-error-message').hide();
    }

    function isEmail(email) {
      const regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
      return regex.test(email);
    }

    $form.on('click', 'button', function (e) {
      e.preventDefault();

      // Clear invalid markers.
      reset();

      // Get input field values and validate
      // We simply change border color to red if empty field using .css()
      let error = false;

      $form.find(':input').each(function () {
        const validate = $(this).attr('validate');
        if (validate === 'notEmpty') {
          if (!$(this).val().trim()) {
            $(this).addClass('invalid');
            error = true;
          }
        } else if (validate === 'email') {
          if (!$(this).val().trim() || !isEmail($(this).val())) {
            $(this).addClass('invalid');
            error = true;
          }
        }
      });

      // Submit when valid.
      if (!error) {

        // Replace selected value with text to have more info than just the number.
        $('[name="abo-option"] option').val(function(){
          return $(this).text();
        });

        // Submit.
        $.post($form.attr("action"), $form.serialize()).then(function() {
          // Show the success message.
          $form.hide();
          $('#form-success-content').show();
        });

      } else {
        // Show validation error message.
        $form.find('#validation-error-message .error-details').html(error);
        $form.find('#validation-error-message').show();
      }
    });
  });

</script>


{{ end }}
